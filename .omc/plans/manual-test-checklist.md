# 수동 테스트 체크리스트

> 사전 조건: [Supabase 설정 가이드](./supabase-setup-guide.md) 완료 필수

---

## B-1. OAuth 인증 테스트 (5개)

| # | 항목 | 절차 | 기대 결과 | 통과 |
|---|------|------|-----------|------|
| 1 | GitHub 로그인 | 로그인 버튼 → 모달 → "GitHub로 로그인" 클릭 | GitHub OAuth 페이지 리디렉션 → 승인 → 사이트 복귀, 프로필 표시 | ☐ |
| 2 | Google 로그인 | (로그아웃 후) 동일 절차로 Google 클릭 | Google OAuth 페이지 → 승인 → 사이트 복귀, 프로필 표시 | ☐ |
| 3 | 로그인 후 UI | 로그인 완료 상태 | `#authLoginBtn` 숨김, `#authUserInfo` 표시, 아바타 + 이름 + 이메일 | ☐ |
| 4 | 로그아웃 | 로그아웃 버튼 클릭 | `#authUserInfo` 숨김, `#authLoginBtn` 표시, 체크인 데이터 초기화 | ☐ |
| 5 | 세션 유지 | 로그인 → 새로고침 | 로그인 상태 유지 (Supabase 세션 자동 복원) | ☐ |

---

## B-2. 체크인 기능 테스트 (6개)

| # | 항목 | 절차 | 기대 결과 | 통과 |
|---|------|------|-----------|------|
| 6 | NEW 배지 표시 | 첫 로그인 (체크인 기록 없음) | 모든 버전 카드에 `.badge-new` 표시 | ☐ |
| 7 | summary 패널 | 로그인 + unseen 존재 | `#checkinSummary` 표시, "N개 새 버전" 텍스트, 최신 5개 버전 표시 | ☐ |
| 8 | 개별 확인 | 특정 버전의 "확인" 버튼 클릭 | 해당 버전 NEW 배지 제거, 버튼 "확인완료"로 변경 + disabled, summary 카운트 감소 | ☐ |
| 9 | 모두 확인 | `#checkinAllBtn` 클릭 | 모든 NEW 배지 제거, summary 패널 숨김, 모든 확인 버튼 상태 변경 | ☐ |
| 10 | DB 저장 확인 | 확인 후 Supabase Table Editor 확인 | `user_checkins` 테이블에 행 생성/갱신 (user_id, service_id, last_checked_version) | ☐ |
| 11 | 서비스별 독립 | 서비스 A 모두 확인 → 서비스 B 전환 | 서비스 B는 여전히 unseen 상태, 독립적 카운트 | ☐ |

---

## B-3. 보안 테스트 (2개)

| # | 항목 | 절차 | 기대 결과 | 통과 |
|---|------|------|-----------|------|
| 12 | RLS 격리 | 계정 A로 체크인 → 계정 B로 로그인 | 계정 B에서 계정 A의 체크인 데이터 안 보임 | ☐ |
| 13 | anon key 직접 호출 | curl로 Supabase REST API 직접 호출 (인증 없이) | RLS가 무인증 요청 차단 (빈 결과 또는 에러) | ☐ |

### 테스트 #13 수행 방법

```bash
curl -X GET "https://{PROJECT_ID}.supabase.co/rest/v1/user_checkins" \
  -H "apikey: {ANON_KEY}" \
  -H "Authorization: Bearer {ANON_KEY}"
# 기대: 빈 배열 [] (RLS가 auth.uid()가 null이므로 필터링)
```

---

## 테스트 결과 요약

| 카테고리 | 총 테스트 | 통과 | 실패 |
|----------|-----------|------|------|
| OAuth 인증 | 5 | | |
| 체크인 기능 | 6 | | |
| 보안 | 2 | | |
| **합계** | **13** | | |

---

## 테스트 환경

- **로컬 서버**: `npx serve site -l 8080`
- **접속 URL**: http://127.0.0.1:8080
- **테스트 브라우저**: Chrome / Firefox / Safari
- **테스트 일자**: _______________

---

## 이슈 로그

| # | 발견 일시 | 테스트 항목 | 이슈 내용 | 해결 여부 |
|---|-----------|-------------|-----------|-----------|
| 1 | | | | ☐ |
| 2 | | | | ☐ |
| 3 | | | | ☐ |

---

## 참고 사항

- 테스트 전 반드시 `npm run build` 실행 필요
- Supabase 대시보드의 **Logs → Auth Logs**에서 인증 에러 확인 가능
- **Table Editor**에서 `user_checkins` 데이터 실시간 확인 가능
- 로그아웃 후 다시 로그인하면 세션이 초기화됨
